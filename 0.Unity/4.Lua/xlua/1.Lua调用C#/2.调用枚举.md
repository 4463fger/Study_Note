[toc]

# Lua 调用 C# 枚举

## 一、枚举调用规则

> **核心语法**：`CS.命名空间.枚举名.成员`  
> 与类调用规则一致，支持取别名。

### 1. 调用 Unity 内置枚举
```lua
PrimitiveType = CS.UnityEngine.PrimitiveType
GameObject = CS.UnityEngine.GameObject

-- 创建立方体
local obj = GameObject.CreatePrimitive(PrimitiveType.Cube)
```

> **关键点**：
>
> - `PrimitiveType` 是 Unity 内置枚举。
> - `CreatePrimitive` 方法接收枚举值作为参数。
---

### 2. 自定义枚举调用
```lua
E_TestEnum = CS.LuaCallCsharp.E_TestEnum
local c = E_TestEnum.Idle
print(c) -- 输出: 0
```

> **规则**：
>
> - 枚举成员值默认从 `0` 开始递增。
> - 可通过 `.` 直接访问枚举值。
---

## 二、枚举类型转换

### 1. 数值转枚举
```lua
local a = E_TestEnum.__CastFrom(1)
print(a) -- 输出: Move
```

> **说明**：
>
> - `__CastFrom` 是 XLua 提供的隐式转换方法。
> - 将整数转换为对应的枚举值（需确保数值在合法范围内）。
---

### 2. 字符串转枚举
```lua
local b = E_TestEnum.__CastFrom("Idle")
print(b) -- 输出: 0
```

> **注意**：
>
> - 字符串需与枚举成员名称完全匹配。
> - 返回的是对应的枚举数值。
---

## 三、参考代码结构（C# 对应）

```csharp
namespace LuaCallCsharp
{
    public enum E_TestEnum
    {
        Idle,
        Move
    }
}
```
