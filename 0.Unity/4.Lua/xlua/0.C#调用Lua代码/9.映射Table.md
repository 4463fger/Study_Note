[toc]

# C# 直接操作 LuaTable 

---

## 1. LuaTable 特性

- **直接访问**：通过 `LuaTable.Get<T>()` 直接读取 Lua 表字段  
- **引用拷贝**：修改字段值会直接影响 Lua 原始表（与类映射不同）  
- **需手动释放**：使用后必须调用 `Dispose()` 释放资源  

---

## 2. 关键代码结构

```csharp
LuaManager.Instance.OnInit();
LuaManager.Instance.DoLuaFile("Main");

// 获取 LuaTable 实例
LuaTable table = LuaManager.Instance.Global.Get<LuaTable>("testClass2");

// 访问字段
Debug.Log(table.Get<int>("internalInt"));
Debug.Log(table.Get<bool>("internalBool"));

// 调用函数
table.Get<Action>("func").Invoke(); // 方式一：Action 调用
table.Get<LuaFunction>("func").Call(); // 方式二：LuaFunction 调用

// 释放资源
table.Dispose();
```

---

## 3. 注意事项

| 规则             | 说明                                            |
| ---------------- | ----------------------------------------------- |
| **类型匹配**     | 必须确保 `Get<T>()` 的类型与 Lua 表字段类型一致 |
| **资源释放**     | 必须手动调用 `Dispose()`，否则可能导致内存泄漏  |
| **引用拷贝**     | 修改字段值会同步到 Lua 表中（与类映射不同）     |
| **函数调用方式** | 支持 `Action.Invoke()` 或 `LuaFunction.Call()`  |
