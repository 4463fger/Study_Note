[toc]

# C# 调用 Lua 全局变量

## 1. 核心概念

XLua 提供 `LuaTable.Global` 对象，允许 C# 直接访问 Lua 的 **全局变量**。  
**特点**：
- 只能访问 Lua 的全局变量（`_G` 表中的变量）
- 支持基本数据类型转换（`int`, `string`, `float` 等）
- 修改全局变量会直接影响 Lua 脚本中的值

---

## 2. 示例代码解析

```csharp
// 初始化 Lua 环境
LuaManager.Instance.OnInit();
// 加载 Lua 文件
LuaManager.Instance.DoLuaFile("Main");

// 获取全局变量
int i = LuaManager.Instance.Global.Get<int>("textNumber");
print(i); // 输出 Lua 中定义的 textNumber 初始值

// 修改全局变量
LuaManager.Instance.Global.Set("textNumber", 55);
int i2 = LuaManager.Instance.Global.Get<int>("textNumber");
print(i2); // 输出修改后的值 55
```

---

## 3. 关键方法说明

| 方法                            | 作用                | 示例                                      |
| ------------------------------- | ------------------- | ----------------------------------------- |
| `Get<T>(string key)`            | 获取 Lua 全局变量值 | `int num = Global.Get<int>("textNumber")` |
| `Set(string key, object value)` | 设置 Lua 全局变量值 | `Global.Set("textNumber", 55)`            |
