[toc]

# Lua 运算符

## 一、算术运算符

```lua
print("*********算数运算符*********")
-- 无自增/自减运算符（++、--）
-- 无复合赋值运算符（+=、-=）
print("123.4" + 1)  -- 124.4（自动类型转换）
print(2 ^ 2)        -- 4（^ 表示幂运算）
```

> **关键特性**：
> - Lua 支持基本的 `+`、`-`、`*`、`/`、`^`（幂运算）、`%`（取模）等运算符
> - **字符串可自动转换为 number**（仅当上下文允许时）
> - **不支持自增/自减** 和 **复合赋值运算符**

---

## 二、条件运算符

```lua
print("*********条件运算符*********")
-- 比较运算符：> < >= <= == ~=
print(3 ~= 1)  -- true（~= 表示不等于）
```

> **比较运算符说明**：
> - `==`：等于
> - `~=`：不等于（Lua 特有的语法）
> - `>`、`<`、`>=`、`<=`：常规比较

---

## 三、逻辑运算符

```lua
print("*********逻辑运算符*********")
-- 与：and | 或：or | 非：not
print(true and false)  -- false
print(true and true)   -- true

print(true or false)   -- true
print(false or false)  -- false

print(not true)        -- false（相当于 C# 的 !true）
```

> **行为特点**：
> - `and` 和 `or` 会返回操作数的**实际值**，而非仅返回布尔值
> - `a and b`：若 `a` 为 `false` 或 `nil`，返回 `a`；否则返回 `b`
> - `a or b`：若 `a` 为 `true` 或非 `nil`，返回 `a`；否则返回 `b`
> - `not` 会将操作数取反（`true` → `false`，`false`/`nil` → `true`）

---

## 四、位运算

```lua
print("*********位运算*********")
-- Lua 原生不支持位运算
-- 需要使用 bit32 库或第三方库实现
```

---



## 五、三目运算符

```lua
print("*********三目运算符*********")
-- Lua 原生不支持 ? : 三目运算符
-- 可通过 and/or 模拟
local a = true
local result = a and "true" or "false"
print(result)  -- 输出: true
```

> **注意事项**：
> - `a and b or c` 的行为类似于 `a ? b : c`
> - 若 `b` 的值为 `false` 或 `nil`，此方式会出错
> - 推荐使用 `if-else` 语句替代复杂逻辑

---



## 六、运算符优先级总结

| 优先级 | 运算符类别 | 运算符示例                       |
| ------ | ---------- | -------------------------------- |
| 1      | 算术运算符 | `^`（幂）                        |
| 2      | 一元运算符 | `not`、`#`、`-`（负号）          |
| 3      | 乘除运算   | `*`、`/`、`%`                    |
| 4      | 加减运算   | `+`、`-`                         |
| 5      | 关系运算符 | `>`、`<`、`>=`、`<=`、`==`、`~=` |
| 6      | 逻辑运算符 | `and`、`or`                      |
| 7      | 赋值运算符 | `=`（仅用于赋值）                |

---

## 八、关键差异对比

| 特性             | Lua                     | C#              |
| ---------------- | ----------------------- | --------------- |
| 自增/自减        | 不支持                  | 支持 `++`、`--` |
| 复合赋值         | 不支持                  | 支持 `+=`、`-=` |
| 字符串转数字     | 自动转换                | 需显式转换      |
| 位运算           | 需依赖库实现            | 原生支持        |
| 三目运算符       | 无 `? :`，需用 `and/or` | 原生支持 `? :`  |
| 逻辑运算符返回值 | 返回操作数实际值        | 仅返回布尔值    |