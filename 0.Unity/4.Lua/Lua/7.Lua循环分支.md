[toc]

# Lua 循环语句

## 一、while 循环

```lua
print("*********while*********")
num = 0
while num < 5 do
    num = num + 1
    print(num)
end
```

> **语法结构**：
> ```lua
> while condition do
>  -- 循环体
> end
> ```

> **关键特性**：
> - **前测试循环**：先判断条件，再执行循环体
> - 条件表达式无需括号
> - 循环体必须用 `end` 明确结束
> - **注意**：若条件始终为真，会陷入死循环

---

## 二、repeat-until 循环（类似 do-while）

```lua
print("*********do while*********")
num = 0
repeat
    print(num)
    num = num + 1
until num > 5
```

> **语法结构**：
> ```lua
> repeat
>  -- 循环体
> until condition
> ```

> **关键特性**：
> - **后测试循环**：先执行一次循环体，再判断条件
> - `until` 后的条件为 **真** 时结束循环
> - **至少执行一次**，无论条件是否为真
> - **与 C# 的 do-while 行为不同**：C# 的 do-while 是条件为假时退出，而 Lua 是条件为真时退出

---

## 三、for 循环

### 1. 基础 for 循环（默认步长 +1）

```lua
print("*********for*********")
for i = 1, 5 do
    print(i)
end
```

> **语法说明**：
>
> - `for i = start, end do`：默认步长为 `1`
> - `i` 的取值范围是 `[start, end]`（**包含 end**）
> - `i` 的类型为整数

---

### 2. 自定义步长

```lua
for i = 1, 5, 2 do
    print(i) // 输出1 3 5
end
```

> **语法说明**：
>
> - `for i = start, end, step do`：第三个参数指定步长
> - 步长可以是正数或负数

---

### 3. 负步长（倒序循环）

```lua
for i = 5, 1, -1 do
    print(i)
end
```

> **关键特性**：
> - 负步长实现倒序循环
> - 终止条件仍为 `i` 是否超出范围（例如 `5 >= 1`）



---

## 四、关键特性总结

| 循环类型       | 语法结构                              | 特点                               |
| -------------- | ------------------------------------- | ---------------------------------- |
| `while` 循环   | `while condition do ... end`          | 前测试循环，条件为真时执行         |
| `repeat-until` | `repeat ... until condition`          | 后测试循环，至少执行一次           |
| `for` 循环     | `for i = start, end, step do ... end` | 支持自定义起始值、终止值和步长     |
| 步长控制       | 通过第三个参数控制                    | 可为正数、负数或 `0`（需谨慎处理） |
| 终止条件       | 包含终止值                            | `for` 循环的 `i` 会取到 `end` 的值 |
