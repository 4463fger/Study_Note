```csharp
using System.Collections;
using System.Collections.Generic;
using Learn.DesignMode;
using UnityEngine;
using UnityEngine.Events;

namespace Learn.ABPackage
{
    //TODO:关联对象池
    public class ABManager : SingletonMono<ABManager>
    {
        // 主包
        private AssetBundle mainAB = null;
        // 依赖包获取用的配置文件
        private AssetBundleManifest manifest = null;
        
        private Dictionary<string, AssetBundle> assetBundlesContainer = new();

        /// <summary>
        /// AB包存放路径
        /// </summary>
        private string PathUrl => Application.streamingAssetsPath + "/";

        private string MainABName
        {
            get
            {
#if UNITY_IOS
                return "IOS";
#elif UNITY_ANDROID
                return "Android";
#else
                return "PC";
#endif

            }
        }

        #region Load

        /// <summary>
                              /// 同步加载资源(不指定类型)
                              /// </summary>
        public Object LoadRes(string abName, string assetName)
        {
            LoadAB(abName);
            // 加载资源
            Object obj = assetBundlesContainer[abName].LoadAsset(assetName);
            if (obj is GameObject)
            {
                return Instantiate(obj);
            }
            return obj;
        }

        /// <summary>
        /// 同步加载资源(根据Type指定类型)
        /// </summary>
        public Object LoadRes(string abName, string assetName , System.Type type)
        {
            LoadAB(abName);
            Object obj = assetBundlesContainer[abName].LoadAsset(assetName,type);
            if (obj is GameObject)
            {
                return Instantiate(obj);
            }
            return obj;
        }
        
        /// <summary>
        /// 同步加载资源(泛型)
        /// </summary>
        public T LoadRes<T>(string abName, string assetName) where T : Object
        {
            LoadAB(abName);
            T obj = assetBundlesContainer[abName].LoadAsset<T>(assetName);
            if (obj is GameObject)
            {
                return Instantiate(obj);
            }
            return obj;
        }
        

        #endregion

        #region LoadAsync
        
        // 异步加载，AB包并不使用异步
        // 仅加载资源异步

        /// <summary>
        /// 异步加载资源(不指定类型)
        /// </summary>
        public void LoadResAsync(string abName , string resName ,UnityAction<Object> callBack)
        {
            StartCoroutine(ReallyLoadResAsync(abName, resName, callBack));
        }
        
        /// <summary>
        /// 异步加载资源(根据Type指定类型)
        /// </summary>
        public void LoadResAsync(string abName , string resName ,System.Type type, UnityAction<Object> callBack)
        {
            StartCoroutine(ReallyLoadResAsync(abName, resName,type, callBack));
        }
        
        /// <summary>
        /// 异步加载资源(泛型)
        /// </summary>
        public void LoadResAsync<T>(string abName , string resName ,UnityAction<T> callBack) where T : Object
        {
            StartCoroutine(ReallyLoadResAsync<T>(abName, resName, callBack));
        }

        private IEnumerator ReallyLoadResAsync(string abName, string resName, UnityAction<Object> callBack)
        {
            LoadAB(abName);
            AssetBundleRequest assetBundleRequest = assetBundlesContainer[abName].LoadAssetAsync(resName);
            yield return assetBundleRequest;

            if (assetBundleRequest.asset is GameObject)
                callBack(Instantiate(assetBundleRequest.asset));
            else
                callBack(assetBundleRequest.asset);
        }
        
        private IEnumerator ReallyLoadResAsync(string abName, string resName,System.Type type, UnityAction<Object> callBack)
                {
                    LoadAB(abName);
                    AssetBundleRequest assetBundleRequest = assetBundlesContainer[abName].LoadAssetAsync(resName,type);
                    yield return assetBundleRequest;
        
                    if (assetBundleRequest.asset is GameObject)
                        callBack(Instantiate(assetBundleRequest.asset));
                    else
                        callBack(assetBundleRequest.asset);
                }
        
        private IEnumerator ReallyLoadResAsync<T>(string abName, string resName, UnityAction<T> callBack) where T : Object
        {
            LoadAB(abName);
            AssetBundleRequest assetBundleRequest = assetBundlesContainer[abName].LoadAssetAsync<T>(resName);
            yield return assetBundleRequest;
        
            if (assetBundleRequest.asset is GameObject)
                callBack(Instantiate(assetBundleRequest.asset) as T);
            else
                callBack(assetBundleRequest.asset as T);
        }

        #endregion

        #region UnLoad
        
        // 卸载
        public void UnLoad(string abName)
        {
            if (assetBundlesContainer.ContainsKey(abName))
            {
                assetBundlesContainer[abName].Unload(false);
                assetBundlesContainer.Remove(abName);
            }
        }

        #endregion
        
        // 加载AB包
        private void LoadAB(string abName)
        {
            // 加载主包
            if (mainAB == null)
            {
                mainAB = AssetBundle.LoadFromFile(PathUrl + MainABName);
                // 加载主包关键配置文件 
                manifest = mainAB.LoadAsset<AssetBundleManifest>("AssetBundleManifest");
            }
            // 获取依赖包
            AssetBundle ab = null;
            string[] strs = manifest.GetAllDependencies(abName);
            for (int i = 0; i < strs.Length; i++)
            {
                if (!assetBundlesContainer.ContainsKey(strs[i]))
                {
                    ab = AssetBundle.LoadFromFile(PathUrl + strs[i]);
                    assetBundlesContainer.Add(strs[i],ab);
                }
            }
            // 加载包
            if (!assetBundlesContainer.ContainsKey(abName))
            {
                ab = AssetBundle.LoadFromFile(PathUrl + abName);
                assetBundlesContainer.Add(abName,ab);
            }
        }

        /// <summary>
        /// 清空所有AB包
        /// </summary>
        public void ClearAB()
        {
            AssetBundle.UnloadAllAssetBundles(false);
            assetBundlesContainer.Clear();
            mainAB = null;
            manifest = null;
        }
    }
}
```

